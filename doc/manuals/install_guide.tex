%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Installation guide for regulatory Sequence Analysis Tools
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass{article}
%\documentstyle[makeidx]{book}
\makeindex
\include{rsat_latex_commands}

\begin{document}

\title{Regulatory Sequence Analysis Tools \\
Installation guide}

\author{
	Jacques van Helden \\
	\email{jvanheld@scmbb.ulb.ac.be} \\
	\url{http://www.scmbb.ulb.ac.be/$\tilde{\hspace{0.4em}}$jvanheld/} \\
	\scmb 
}


\maketitle

\newpage
\tableofcontents
\newpage

\section{Description}

This documents describes the installation procedure for the software
package \textbf{Regulatory Sequence Analysis Tools} (\RSAT).

\section{Requirements}

\subsection{Operating system}

\RSAT is a unix-based package. It has been installed successfully on
the following operating systems.

\begin{enumerate}
\item Linux

\item Mac OSX

\item Sun Solaris

\item Dec Alpha

\item cygwin (under MS Windows 98) (except for the graphical
librairies, because I did not find a cygwin version of GD.pm)

\end{enumerate}

\RSAT is not compatible with any version of Microsoft Windows and I
have no intention to make it compatible in a foreseeable future. Since
most programs are written in perl, part of them might run under
windows, but some others will certainly not, because they include
calls to unix system commands.

\subsection{Perl language}

The programs in \RSAT are written in perl. Version 5.1 or
later is recommended.

\subsection{Perl modules}

Two perl modules are required for the graphical tools of \RSAT.

\begin{description}
\item[GD.pm] Interface to Gd Graphics Library.
\item[PostScript::Simple]  Produce PostScript files from Perl.
\end{description}

These modules can be found in the Comprehensive Perl Archive Network
(\url{http://www.cpan.org/}).


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Installation
\section{Installation}

For the time being, \RSAT is distributed as a compressed archive. In a
near future, we will also distribute it via a CVS server, which will
greatly facilitate the updates.


% \RSAT can be distributed either as a compressed archive, or via the CVS
% server. The CVS distribution greatly facilitates updates.

% \textbf{Note} The CVS distribution will soon be available for external
% users, but we still need to configure the CVS server to accept a guest
% login. For the time being, the CVS distribution is still restricted to
% the people from the lab. Inbetween, the only distribution mode for
% external users is the compressed archive.

% \subsection{Installation from the CVS repository}


% Before being able to retrieve \RSAT from the CVS repository, you need
% an account on our server. For this, please contact Jacques van Helden
% (\email{jvanheld@scmbb.ulb.ac.be}).

% \subsubsection{First installation}

% The following command should be used the first time you retrieve the
% tools from the server:
% \begin{verbatim}
% cvs -d mylogin@rubens.ulb.ac.be:/rubens/dsk2/cvs co rsa-tools
% \end{verbatim}

% This will create a directory \file{rsa-tools} on your computer, and
% store the programs in it. Note that at this stage the programs are not
% yet functional, because you still need to install genomes, which are
% not included in the CVS distribution.

% \subsubsection{Updates}

% Once the tools have been retrieved, you can obtain updates very
% easily. For this, you need to change your directory to the rsa-tools
% directory, and use the \texttt{cvs} command in the following way.

% \begin{verbatim}
% cd rsa-tools
% cvs update .
% \end{verbatim}


\subsection{Installation from a compressed archive}

Uncompress the archive containing the programs. The archive is
distributed in \texttt{zip} or \texttt{tar} format.

The \texttt{.zip} files can be uncompressed with the command
\program{unzip}.

\begin{verbatim}
unzip rsa-tools_yyyymmdd.zip
\end{verbatim}
where yyyymmdd stands for the version number (delivery date).

If the \program{unzip} command is not supported on your system, you
can uncompress the \texttt{.tar.gz} archive with the commands
\program{gunzip} and \program{tar}, which are part of the default unix
installation.

\begin{verbatim}
gunzip rsa-tools_yyyymmdd.tar.gz
tar -xpf rsa-tools_yyyymmdd.tar
\end{verbatim}

\section{Adding \RSAT to your path}

\begin{enumerate}

\item Create an environment variable named RSAT and containing the
path of rsa-tools. For example, assuming \RSAT have been installed in
the directory \texttt{/home/myaccount/rsa-tools}, and your shell is
bash:

\begin{verbatim}
export RSAT=/home/myaccount/rsa-tools
\end{verbatim}

\item add the path of rsa-tools/perl-scripts and binaries to your path.

\begin{verbatim}
export PATH=${PATH}:${RSAT}/bin
export PATH=${PATH}:${RSAT}/perl-scripts
\end{verbatim}

\end{enumerate}

If you are using a different shell than bash, the specification of
environment variables is slightly different (for example, in tcsh, you
need to use \program{setenv} instead of \program{export}). In case of
doubt, ask your system administrator how to configure your environment
variables and your path.

The specification of the environment variables and paths are required
each time you want to use \RSAT. You can add these specification to
your personal profile (e.g. the \file{.bashrc} file if your shell is
bash). If you don't know how to proceed, ask your system
administrator.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Directories

\section{Initializing the directories}

In addition to the programs, the installation of rsa-tools requires
the creation of a few directories for storing data, access logs (for
the web server), and temporary files.  

The distribution includes a series of make scripts which will
facilitate this step. You just need go to the rsa-tools directory, and
start the appropriate make file.

\begin{verbatim}
cd rsa-tools
make -f makefiles/init_RSAT.mk init
\end{verbatim}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Genome installation
\section{Installing genomes}

Genomes are distributed via the HTTP server. 

\begin{quote}
\url{http://rsat.ulb.ac.be/rsat/data/genomes/}
\end{quote}

Download the genomes you need and store them in your local \RSAT
genome directory

\begin{quote}
\file{/home/myaccount/rsa-tools/public\_html/data/genomes}
\end{quote}

You also need the file which provides the list of supported genomes.

\begin{quote}
\url{http://rsat.ulb.ac.be/rsat/data/supported\_organisms.pl}
\end{quote}

This file must be stored in your \RSAT data directory

\begin{quote}
\file{/home/myaccount/rsa-tools/public\_html/data/}
\end{quote}

If you only downloaded a subset of genomes, you will need to to edit
the file \file{supported\_organisms.pl}, in order to delete the
specification of other genomes.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Config file
\section{Configuring \RSAT for utilization on the command line}

The \RSAT distribution comes with a template configuration file named
\file{RSA.config.default} and located in the \file{rsa-tools}
directory.

Copy this file to create your own config file \file{RSA.config}.

\begin{verbatim}
cp RSA.config.default RSA.config
\end{verbatim}

In principle, this default configuration file is sufficient to run the
tools on the command-line. 

You only need to edit it if you want to install a web server of the
tools, or if you want to specify custom settings (for example the
installation of additional genomes on a separate hard drive).


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Tests for the command line tools
\section{Testing the command-line tools}

\subsection{Testing the access to perl scripts}

From now on, you should be able to use the perl scripts from the
command line. To test this, run: 

\begin{verbatim}
random-seq -help
\end{verbatim}

This should display the on-line help for the random sequence
generator. 

\begin{verbatim}
random-seq -l 200 -r 4 -a a:t 0.3 c:g 0.2
\end{verbatim}

Should generate a random sequence.

\subsection{Testing genome installation}

We will now testif the genomes are correctly installed. You will
obtain the list of supported organisms with the command:

\begin{verbatim}
supported-organisms
\end{verbatim}

If this command returns no result, it means that genomes were either
not installed, or not correctly configured. In such a case, check the
directories in the \file{data/genomes} directory, and check that the
file \file{data/supported\_organisms.pl}.

Once you can obtain the list of installed organisms, try to retrieve
some upstream sequences. You can first read the list of options for the
\program{retrieve-seq} program.

\begin{verbatim}
retrieve-seq -help
\end{verbatim}

Select an organism (say \organism{Saccharomyces cerevisiae}), and
retrieve all the start codons with the following options :

\begin{verbatim}
retrieve-seq -org Saccharomyces_cerevisiae \
        -type upstream -from 0 -to +2 -all \
        -format wc -nocomment 
\end{verbatim}

This should return a set of 3 bp sequences, mostly ATG (in the case of
\organism{Saccharomyces cerevisiae} at least)

\subsection{Testing the graphical scripts}

\RSAT includes two graphical tools, \program{feature-map} and
\program{XYgraph}. These tools require the following  perl modules: 

\begin{description}
\item[GD.pm] Interface to Gd Graphics Library.
\item[PostScript::Simple]  Produce PostScript files from Perl.
\end{description}

To test if these modules are available on your machine, type.

\begin{verbatim}
feature-map -help
\end{verbatim}

If the modules are available, you should see the help message of the
program feature-map. If not, you will see an error message complaining
about the missing librairies. In such a case, ask your system
administrator to install the missing modules.

\section{Further steps}

The installation is now finished, you can start the user's guide. 

\end{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

